# P06.Fraction and Exponent Functions

### <mark style="color:$danger;">Ruby</mark>

เมื่อ include Math แล้วจะสามารถเรียกใช้เมธอดฟังก์ชันทางคณิตศาสตร์ได้โดยตรง

```ruby
x = fraction * 2**exponent # fraction คือ เศษส่วน exponent คือ เลขยกกำลัง
```

*   <mark style="color:blue;">**frexp(x)**</mark> : ส่งคืน array เศษส่วนและเลขชี้กําลังจาก x ที่กําหนด

    Examples:

    ```ruby
    frexp(-Float::INFINITY) # => [-Infinity, -1]
    frexp(-2.0)      # => [-0.5, 2]
    frexp(-1.0)      # => [-0.5, 1]
    frexp(0.0)       # => [0.0, 0]
    frexp(1.0)       # => [0.5, 1]
    frexp(2.0)       # => [0.5, 2]
    frexp(Float::INFINITY)  # => [Infinity, -1]
    ```
*   <mark style="color:blue;">**ldexp(fraction, exponent)**</mark> : ส่งคืนค่าการคำนวณเศษส่วนและเลขชี้กําลังที่กําหนด

    Examples:

    <pre class="language-ruby"><code class="lang-ruby">ldexp(-Float::INFINITY, -1) # => -Infinity
    <strong>ldexp(-0.5, 2)       # => -2.0
    </strong>ldexp(-0.5, 1)       # => -1.0
    ldexp(0.0, 0)        # => 0.0
    ldexp(-0.5, 1)       # => 1.0
    ldexp(-0.5, 2)       # => 2.0
    ldexp(Float::INFINITY, -1)  # => Infinity
    </code></pre>

&#x20;      เลขชี้กำลังจะถูกใช้เป็นจำนวนเต็มถึงจะใส่เป็นทศนิยมก็ตาม

Examples:

<pre class="language-ruby"><code class="lang-ruby"><strong>ldexp(-0.5, 2.2)       # => -2.0
</strong>ldexp(-0.5, 1.2)       # => -1.0
ldexp(0.0, 0.3)        # => 0.0
ldexp(-0.5, 1.2)       # => 1.0
ldexp(-0.5, 2.3)       # => 2.0
</code></pre>

***

### <mark style="color:$danger;">C</mark>

เมื่อ #include \<math.h> สามารถใช้ frexp ldexp ได้

แต่ในภาษาเขียนโปรแกรม C ต้องระบุ pointer ชนิด int เพื่อเก็บค่า exponent ด้วย

frexp( double x, int \*exponent )

และ exponent ใน C ต้องระบุเป็น int

ldexp( double fraction, int exponent )

```c
int i;
double fraction = frexp(-1.0, &i); // fraction = -0.500000, i=1

double ld = ldexp(-0.5,1); // ld = -1.000000 
```

***

### <mark style="color:$danger;">Java</mark>

การใช้ฟังก์ชันทางคณิตศาสตร์ในภาษาเขียนโปรแกรม **Java** <mark style="color:$info;">ถึงจะไม่</mark> <mark style="color:$info;"></mark><mark style="color:$info;">`import java.lang.Math;`</mark> <mark style="color:$info;"></mark><mark style="color:$info;">ก็สามารถใช้ค่าคงที่ทางคณิตศาสตร์ได้เลย</mark> เพราะ java.lang จะถูก import อัตโนมัติ เหมือนมี `import java.lang.*;` ที่จุดเริ่มต้นของ compiler ทันทีหลังจาก`package`ใดก็ตาม

สามารถใช้ ldexp ผ่านคำสั่งด้านล่าง

Math.scalb(double d, int scaleFactor) // เหมือนกับ ldexp ใน Ruby

> ไม่มีคำสั่ง frexp ในภาษา Java ต้องใช้เขียนขึ้นมาเองความสัมพันธ์ทางด้านล่าง

> int exponent = (int) Math.floor(Math.log(Math.abs(number)) / Math.log(2)) +1;

> // exponent ของ frexp ในภาษาเขียนโปรแกรม Ruby

> double fraction = x / Math.pow(2, exponent) // fraction ของ frexp ในภาษาเขียนโปรแกรม Ruby

```java
class Main {

    public static double[] frexp(double number) {

        // ถ้า number เป็น NaN (Not a Number) จะคืนค่าเป็น NaN และเลขชี้กำลังเป็น 0
        if (Double.isNaN(number)) {
            return new double[]{Double.NaN, 0};
        }
        
        // ถ้า number เป็น 0.0 จะคืนค่าเป็น 0.0 และเลขชี้กำลังเป็น 0
        if (number == 0.0) {
            return new double[]{0.0, 0};
        }
        
        // ถ้า number เป็นอนันต์บวก (+Infinity) จะคืนค่าเป็น +Infinity และเลขชี้กำลังเป็น -1
        if (number == Double.POSITIVE_INFINITY) {
            return new double[]{Double.POSITIVE_INFINITY, -1};
        }
        
        // ถ้า number เป็นอนันต์ลบ (-Infinity) จะคืนค่าเป็น -Infinity และเลขชี้กำลังเป็น -1
        if (number == Double.NEGATIVE_INFINITY) {
            return new double[]{Double.NEGATIVE_INFINITY, -1};
        }
        
        int exponent = (int) Math.floor(Math.log(Math.abs(number)) / Math.log(2)) +1;
        double fraction = number / Math.pow(2, exponent);
        return new double[]{fraction, exponent};
    }

    public static void main(String[] args) {
        double number = -1.0;
        double[] result = frexp(number); // [-0.5, 1.0]
        System.out.println(result[0]); // -0.5
        System.out.println(result[1]); // 1.0
    }
}
```

ผลลัพธ์:

```
-0.5
1.0
```

***

### <mark style="color:$danger;">Python</mark>

เมื่อ include math สามารถใช้ frexp ldexp ผ่านคำสั่งด้านล่าง

math.frexp(double x)

math.ldexp(double _x_, int _i_)

```python
math.frexp(-1) # (-0.5, 1)
math.ldexp(-0.5,1) # -1.0
```
